# (임시)Crawling
현재 진행 중인 크롤링 파트 task입니다.

## 현재 작업 중
- 크롤링 코드 중 로깅
- aws 다루기
- 레딧 관련
- 

## 해결된? 문제
- 게임 리스트 작성 시, 이상한 게임이 섞임
- 게임 리스트 작성 코드 최적화 
- 메타크리틱 빈 페이지 전송 대처
- 스팀API 쿼리 제한에 따른 게임 분배
- 크롤링 시간 범위 지정


## 진행 상황


__크롤링 코드 작성__
- 상위 1000 게임 리스트 (완성)  
  API가 오후 12시부터 작동하는 제한 있음  
  순위에 있는 이상한 게임을 최대한 걸러내기 위해 기준 작성됨-조정 필요(슬랙 참조)  
  다양한 검증 기준으로 인해 약간 시간이 걸림-블랙리스트 작성 및 저장으로 속도 개선    
    
- 스팀(완성)  
  API 사용, 상당한 메타정보 존재(각 사이트에서 가져오는 정보는 코드 주석으로 정리되어 있음)  
  하루 제한: IP당 1000만 건, 시간당: 120만 건   
  예상 데이터 수: 적게는 5000, 많게는 백몇십만, 평균적으로 만건대 예상  
    
  현재 발생한 에러: 네트워크 에러, api 에러. 최대 25초까지 대기 후 재시도하여 해결 중  
  로그 대신 print로 에러 출력 중  
  현재 최대 1000만건까지의 대규모 테스트 완료
 
 - 메타크리틱-유저(완성)  
   셀레니움 기반 크롤링 사용(메타크리틱은 동적 페이지를 활용함)
   속도가 꽤 느림. 100건당 3분쯤 소요됨
   게임당 많게는 n천 건, 적게는 수십 건 예상  
   
   메타크리틱은 일정 주기동안 동일 ip에서 접속량이 초과될 시 빈 페이지를 띄움  
   빈 페이지를 감지 시 최소 10초~81초의 간격을 두고 재시도하여 해결 중  
    
 
__돌아가는 파이프라인 구축__
- aws 인스턴스 환경설정 및 사전 준비   
  task 분배를 위한 코드 작성 (스팀)
  새 인스턴스를 위한 requirements.txt 작성됨
  
## 해야 할 것


